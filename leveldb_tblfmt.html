<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c4{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c1{orphans:2;widows:2}.c5{font-weight:700}.c3{text-align:center}.c2{height:11pt}.c0{font-family:"Courier New"}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c4"><p class="c1 c3"><span class="c0 c5">leveldb&#34920;&#25991;&#20214;&#26684;&#24335;</span></p><p class="c1 c3"><span class="c0">&#36213;&#26143;&#23431;</span></p><p class="c1"><span class="c0">&#26412;&#25991;&#20171;&#32461;leveldb&#30340;&#34920;&#25991;&#20214;&#26684;&#24335;&#12290;leveldb&#30340;&#34920;&#25991;&#20214;&#26159;&#19981;&#21487;&#21464;&#30340;&#65292;&#19968;&#26086;&#24418;&#25104;&#23601;&#19981;&#21487;&#20197;&#20462;&#25913;&#12290;&#19979;&#38754;&#20171;&#32461;&#20854;&#24067;&#23616;&#65306;</span></p><p class="c1"><span class="c0">&lt;&#25991;&#20214;&#24320;&#22987;&gt;</span></p><p class="c1"><span class="c0">[&#25968;&#25454;&#22359; 1]</span></p><p class="c1"><span class="c0">[&#25968;&#25454;&#22359; 2]</span></p><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">[&#25968;&#25454;&#22359; N]</span></p><p class="c1"><span class="c0">[meta&#22359; 1]</span></p><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">[meta&#22359; K]</span></p><p class="c1"><span class="c0">[meta&#32034;&#24341;&#22359;]</span></p><p class="c1"><span class="c0">[&#32034;&#24341;&#22359;]</span></p><p class="c1"><span class="c0">[Footer](&#22266;&#23450;&#22823;&#23567;; &#20854;&#24320;&#22987;&#20301;&#32622;&#20026;&#65306;&#25991;&#20214;&#22823;&#23567;-Footer&#22823;&#23567;)</span></p><p class="c1"><span class="c0">&lt;&#25991;&#20214;&#32467;&#26463;&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&#21517;&#35789;&#20171;&#32461;&#65306;</span></p><p class="c1"><span class="c0">&#25968;&#25454;&#22359;&#65306;&#23384;&#25918;&#23454;&#38469;kv&#23545;&#25968;&#25454;&#30340;&#22359;&#12290;</span></p><p class="c1"><span class="c0">meta&#22359;&#65306;&#23384;&#25918;&#20803;&#25968;&#25454;&#30340;&#22359;&#65292;&#20854;&#20998;&#20026;filter&#22359;&#21644;&#32479;&#35745;&#20449;&#24687;&#22359;&#65292;&#30446;&#21069;&#32479;&#35745;&#20449;&#24687;&#22359;&#36824;&#27809;&#26377;&#23454;&#29616;&#65292;&#25152;&#20197;&#30446;&#21069;meta&#22359;==filter&#22359;&#12290;</span></p><p class="c1"><span class="c0">meta&#32034;&#24341;&#22359;&#65306;&#23384;&#25918;meta&#22359;&#21517;&#23383;&#21363;key&#21644;meta&#22359;&#24320;&#22987;&#20301;&#32622;&#21644;&#38271;&#24230;&#21363;value&#30340;kv&#23545;&#25968;&#25454;&#30340;&#22359;&#12290;</span></p><p class="c1"><span class="c0">&#32034;&#24341;&#24555;&#65306;&#23384;&#25918;&#27599;&#20010;&#25968;&#25454;&#22359;&#36215;&#22987;key&#21644;&#25968;&#25454;&#22359;&#24320;&#22987;&#20301;&#32622;&#21644;&#38271;&#24230;&#30340;&#21363;value&#30340;kv&#23545;&#25968;&#25454;&#30340;&#22359;&#12290;</span></p><p class="c1"><span class="c0">Footer&#65306;&#22266;&#23450;&#22823;&#23567;&#65292;&#20854;&#24320;&#22987;&#20301;&#32622;&#20026;&#65306;&#25991;&#20214;&#22823;&#23567;-Footer&#22823;&#23567;&#65292;&#23384;&#25918;meta&#32034;&#24341;&#22359;&#21644;&#32034;&#24341;&#22359;&#30340;&#24320;&#22987;&#20301;&#32622;&#21644;&#38271;&#24230;&#12290;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">Footer&#24067;&#23616;&#65306;</span></p><p class="c1"><span class="c0">metaindex_handle: char[p]; // Block handle for metaindex</span></p><p class="c1"><span class="c0">index_handle: char[q]; // Block handle for index</span></p><p class="c1"><span class="c0">padding: char[40-p-q]; // zeroed bytes to make fixed length</span></p><p class="c1"><span class="c0">// (40==2*BlockHandle::kMaxEncodedLength)</span></p><p class="c1"><span class="c0">magic: fixed64; // == 0xdb4775248b80fb57 (little-endian)</span></p><p class="c1"><span class="c0">&#21487;&#20197;&#30475;&#20986;&#20854;&#20013;&#23384;&#25918;&#20102;meta&#32034;&#24341;&#22359;&#30340;&#24320;&#22987;&#20301;&#32622;&#21644;&#38271;&#24230;&#12289;&#32034;&#24341;&#22359;&#30340;&#24320;&#22987;&#20301;&#32622;&#21644;&#38271;&#24230;&#12290;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">filter&#65288;bloom filter&#65289;&#22359;&#24067;&#23616;&#65306;</span></p><p class="c1"><span class="c0">[filter 0]</span></p><p class="c1"><span class="c0">[filter 1]</span></p><p class="c1"><span class="c0">[filter 2]</span></p><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">[filter N-1]</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">[filter 0&#30340;&#20559;&#31227;&#37327;] : 4 bytes</span></p><p class="c1"><span class="c0">[filter 1&#30340;&#20559;&#31227;&#37327;] : 4 bytes</span></p><p class="c1"><span class="c0">[filter 2&#30340;&#20559;&#31227;&#37327;] : 4 bytes</span></p><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">[filter N-1&#30340;&#20559;&#31227;&#37327;] : 4 bytes</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">[filter&#20559;&#31227;&#37327;&#25968;&#32452;&#30340;&#36215;&#22987;&#20301;&#32622;] : 4 bytes</span></p><p class="c1"><span class="c0">lg(base) : 1 byte</span></p><p class="c1"><span class="c0">&#21487;&#20197;&#30475;&#20986;&#19968;&#20010;filter&#22359;&#20013;&#20250;&#23384;&#24456;&#22810;filter&#65292;&#32780;&#19988;&#19968;&#33324;&#26469;&#35828;filter&#22359;&#21482;&#20250;&#26377;&#19968;&#20010;&#12290;</span></p><p class="c1"><span class="c0">base&#34920;&#31034;&#25968;&#25454;&#22359;&#36215;&#22987;&#20301;&#32622;&#26144;&#23556;&#21040;filter&#21495;&#26102;&#38656;&#35201;&#38500;&#30340;&#20559;&#31227;&#37327;&#12290;</span></p><p class="c1"><span class="c0">&#25968;&#25454;&#22359;&#36215;&#22987;&#20301;&#32622;&#38500;&#20197;base&#23601;&#26159;&#20854;&#23545;&#24212;&#30340;filter&#21495;&#12290;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">GET&#25968;&#25454;&#36807;&#31243;&#20998;&#26512;&#65306;(&#24456;&#22810;&#20854;&#23454;&#32531;&#23384;&#22312;&#20869;&#23384;&#20013;&#19981;&#29992;&#21435;&#25991;&#20214;&#37324;&#38754;&#35835;)</span></p><p class="c1"><span class="c0">GET&#25968;&#25454;&#26102;&#65292;&#39318;&#20808;&#26681;&#25454;&#25991;&#20214;&#22823;&#23567;&#21644;Footer&#30340;&#22266;&#23450;&#22823;&#23567;&#65292;&#25214;&#21040;Footer&#20449;&#24687;&#65292;&#35299;&#26512;&#20986;&#20854;&#20013;&#20445;&#23384;&#30340;meta&#32034;&#24341;&#22359;&#30340;&#24320;&#22987;&#20301;&#32622;&#21644;&#38271;&#24230;&#12289;&#32034;&#24341;&#22359;&#30340;&#24320;&#22987;&#20301;&#32622;&#21644;&#38271;&#24230;&#12290;&#24182;&#19988;&#25454;&#27492;&#35835;&#21462;&#20986;meta&#32034;&#24341;&#22359;&#21644;&#32034;&#24341;&#22359;&#65292;&#24182;&#26681;&#25454;meta&#32034;&#24341;&#22359;&#20013;&#30340;&#20449;&#24687;&#23558;filter&#22359;&#35835;&#21462;&#20986;&#26469;&#12290;&#26681;&#25454;&#32034;&#24341;&#22359;&#21487;&#20197;&#25214;&#21040;get&#30340;key&#23545;&#24212;&#30340;&#25968;&#25454;&#22359;&#20559;&#31227;&#37327;&#12290;&#21033;&#29992;&#36825;&#20010;&#20559;&#31227;&#37327;&#35745;&#31639;&#23545;&#24212;&#30340;filter&#21495;&#65292;&#25214;&#21040;filter&#21518;&#21487;&#20197;&#20570;bloom&#21028;&#26029;&#65292;&#22914;&#26524;&#19981;&#23384;&#22312;&#21017;&#19981;&#29992;&#35835;&#21462;&#25968;&#25454;&#22359;&#65292;&#22914;&#26524;&#23384;&#22312;&#21017;&#35835;&#21462;&#25968;&#25454;&#22359;&#20174;&#20013;&#35835;&#21462;&#25968;&#25454;&#12290;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p></body></html>